{% extends 'base.html.twig' %}

{% block title %}Location #{{ order.id }}{% endblock %}

{% block breadcrumb %}
  {% include 'partials/_breadcrumb.html.twig' with { items: [
    { label: 'Accueil', url: path('home_index') },
    { label: 'Locations', url: path('order_index') },
    { label: '#'~order.id, url: '#' }
  ] } %}
{% endblock %}

{% block body %}
<div class="card">
  <div style="display:flex; justify-content:space-between; align-items:center; gap:12px">
    <h1 style="margin:0">Location #{{ order.id }}</h1>
    <div style="display:flex; gap:8px">
      <a class="btn btn-outline" href="{{ path('order_edit', {id: order.id}) }}">Modifier</a>
      <form method="post" action="{{ path('order_return', {id: order.id}) }}" onsubmit="return confirm('Confirmer la restitution ?');">
        <button class="btn btn-outline btn-danger" title="Rendre la commande">Rendre la commande</button>
      </form>
    </div>
  </div>
  <p><strong>Client:</strong> {{ order.customerName }}</p>
  <p><strong>Date:</strong> {{ order.createdAt|date('Y-m-d H:i') }}</p>

  <div class="scroll-x">
    <table class="table">
      <thead>
        <tr>
          <th>Matériel</th>
          <th>Quantité</th>
          <th>Prix unitaire</th>
          <th>Sous-total</th>
        </tr>
      </thead>
      <tbody>
        {% for item in order.items %}
          <tr>
            <td>{{ item.equipment.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.unitPrice|money }}</td>
            <td>{{ (item.unitPrice * item.quantity)|money }}</td>
          </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <th colspan="3" class="text-end">Total / jour</th>
          <th>{{ total|money }}</th>
        </tr>
      </tfoot>
    </table>
  </div>

  <a href="{{ path('order_index') }}" class="btn btn-outline">Retour aux locations</a>
</div>
{% endblock %}


